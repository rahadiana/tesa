#!/bin/bash
jsonnya_oke=$(curl -Ss "$1" --header 'authority: www.lazada.co.id' --header 'accept-language: id-ID,id;q=0.9,en-US;q=0.8,en;q=0.7,ms;q=0.6,ru;q=0.5' --header 'cookie: lzd_cid=b71a5253-981a-44bf-e8e1-dbc2ab89028e; l=fBMBB9-7NdTCa9C-BO5Courza779ZIRb4xNzaNbMiIEGa6BlZHnSwNC6y0yBodtjQT1fC9KyVhmX9dLHR3Ap9xDDBjJcGP4nnxmlphiR.; __wpkreporterwid_=2717648b-7688-498c-b55b-fd33c23389ce; hc_lzd_cid=f7452181-4794-445b-be46-3812098b9a6f; t_uid=b71a5253-981a-44bf-e8e1-dbc2ab89028e; hng=ID|id-ID|IDR|360; hng.sig=to18pG508Hzz7EPB_okhuQu8kDUP3TDmLlnu4IbIOY8; _bl_uid=1nlCUmLn3U9sIjqb57nva9v3dv7a; tfstk=dC1wrgNYa5FZ6FvcnLRVzSh9QQR9_QE7mstXoZbD5hxi1ficLMIqlPEYB9-VxH_1GCAXniSRz1GXfCxmgZIqGA_MhjXVYGJffNAXnSSXYs__BoI2nitUWI1Vkj8coiU9cPeCWNdviuZ507_OWuU0VugComk9MIq7VWZ95LdAqbTJwGUR8vDrlprlyHf6FdtgSXEkxjccsRQM4P-HJeCe8d-lAFXwomLH_jCAQmD2IeLeVyzFWmJ7E; t_fv=1693766307052; age_restriction=over%3B18%3B1; __itrace_wid=338fe0d8-0464-4ebc-834c-263f3aa09371; lwrid=AQGLdvf8M4ketUHiVTJfzBu75FwV; cna=MZ9zHbPm2DICAWd3iv0tayAi; xlly_s=1; _gcl_au=1.1.138538862.1698511195; _fbp=fb.2.1698513340129.1045677739; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C19659%7CMCMID%7C40954182034328208613584654682008175290%7CMCAAMLH-1699118140%7C3%7CMCAAMB-1699118140%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1698520540s%7CNONE%7CvVersion%7C5.2.0; _uetsid=9dff9cc075b511ee8f098520ceac98b2; _uetvid=9dffe69075b511eea0f3a5ff268a4330; t_sid=JwWBjPQbB1lN6iynPxhGdBzgMt4bahtG; utm_channel=NA; lzd_sid=13b43a3c63dd41d3c8e88b2d0431b88d; _tb_token_=ee3343307d53b; _m_h5_tk=4504aa3d2c197fd7133d0e30b50dd570_1698581928303; _m_h5_tk_enc=cfb222a08030933b1d60377945013662; x5sec=7b22617365727665722d6c617a6164613b33223a22307c434f54612b4b6b47454c3335307441464967706a5958427a62476c6b5a5859794d4a7a687837494451414d3d3b617c434e58612b4b6b4745507646766676382f2f2f2f2f77456943584a6c5932467764474e6f5954446b703675382f762f2f2f2f384251414e4b4d4441784d44426d5a6a41774d4441774d6a49774d5467774d4441774d4441774e4459344e54453459544d31596a457a5a6d5935595752695a544e6d4f574a6c59673d3d222c22733b32223a2262663361376130656665633232623264227d; epssw=1*ig5s11ii6CedGADMNcGQovOSs4UaVADwC2zeJ8h5TBY4uR4sxyHjHyUVNcGnpddfn962NKdLJGXeLFVjF1B55zAsF_s4WYOWH96VXtCDGbO63A_orcYcNtBCnCBWPYXB3GPtDktoNW09BHG9L-oci2zpZsCKE7JBWRqKKpYDo99-93XCe4QRetyBeJsGexypeuNnyaInMtyd68BXF0M76XrnmF3Gya_JerMqxYInAk-nyaB5; isg=BPPztGFSkqQcn186R2bZ3Bo3gvcdKIfq8IMys6WUFpLApBVGLf7CODdyXsxKAd_i; _m_h5_tk=b1837ba519ee9e0f459e64afb1c8d4f0_1698522100610; _m_h5_tk_enc=8b5bd9284fcff15476f7158963379b9c; hng=ID|id-ID|IDR|360; hng.sig=dJwrVwSueShOlZz95EBCvlH9FLAVtzGZ3msUnc25HIQ; lzd_cid=3cf1bf50-eb04-4ffd-aec9-68c7e7bc1655')


 if jq -e . >/dev/null 2>&1 <<<"$jsonnya_oke"; then
    echo $jsonnya_oke > data/raw/$2/$2_$3.json
    echo "berhasil"
else
    echo "gagal $1"
    echo "./create.sh '$1' '$2' '$3' " >> failed.sh
fi
